# 아이템 67 -  최적화는 신중히하라.

조금 웃긴 이야기로 부터 이 아이템은 시작한다.

### 모든 사람이 마음 깊이 새겨야 할 최적화 격언 세 개를 소개한다.

- 그 어떤 핑계보다 효율성이라는 이름 아래 행해진 컴퓨팅 죄악이 더 많다.
- 자그마한 효율성은 모두 잊자. 섣부른 최적화가 만악의 근원이다.
- 최적화 할 때 다음 두 규칙을 따르라.
    - 첫번째, 하지마라
    - 두 번째, 아직 하지마라 → 다시 말해 완전히 명백하고 최적화 되지 않은 해법을 찾을때 까지는 하지 마라.

성능때문에 견고한 구조를 희생하지 말자라는 뜻

빠른 프로그램보다는 좋은 프로그램을 작성하라. 라는 뜻입니다.

### 성능을 제한하는 설계를 피하라.

완성 후 변경하기가 가장 어려운 설계 요소는 바로 컴포넌트끼리, 혹은 외부 시스템과의 소통 방식임.

### API를 설계할 때 성능에 주는 영향을 고려하라.

public 타입을 가변으로 만들면, 즉 내부 데이터를 변경할 수 있게 만들면 불필요한 방어적 복사를 수 없이 유발 할 수 있다.

### 성능을 위해 API를 왜곡하는 건 매우 안 좋은 생각이다.

API를 왜곡하도록 만든 그 성능 문제는 해당 플랫폼이나 아랫단 소프트웨어의 다음 버전에서 사라질 수 도 있지만, 왜곡된 API와 이를 지원하는 데 따르는 고통은 영원히 계속될 것이다.

### 각각의 최적화 시도 전후로 성능을 측정하라

성능을 최적화 한다고 해도 눈에 띄게 높지 않거나 혹은 심지어 더 악화될 수 있기 때문이다.

### 프로파일링과 성능 측정의 중요성

최적화는 감이 아닌 측정 기반의 과정이다.

프로파일링 도구를 사용하면 메서드별 실행 시간과 호출 횟수를 분석해 진짜 병목 지점을 찾을 수 있다.

미세한 튜닝보다 비효율적인 알고리즘을 교체하는 것이 더 큰 개선을 가져온다.

시스템이 커질수록 프로파일러의 중요성은 커지며 JMH(Java Microbenchmark Harness) 는 코드의 세밀한 성능 차이를 확인할 때 유용하다.  

자바는 추상화 수준이 높아 성능 예측이 어렵다.

따라서 모든 최적화 전후에는 측정으로 검증하고,

플랫폼별로 결과를 비교하는 습관이 필요하다.

---

빠른 프로그램을 만들기보다 좋은 프로그램을 만드는 것이 우선이다.

API나 데이터 포맷 같은 변경이 어려운 설계 요소에서는 처음부터 성능을 고려해야 하지만 그 외의 경우는 충분히 작동하는 구조를 먼저 완성하고, 측정 → 진단 → 개선의 순서로 접근하라.

프로파일러가 보여주는 실제 데이터가 당신의 최적화 방향을 결정해줄 것이다.